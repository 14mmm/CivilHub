{% extends 'places_core/base.html' %}
{% load staticfiles i18n %}

{% block require_scripts %}
<script>
window.GOOGLE_DATA = {
    scope: '{{ plus_scope }}',
    id: '{{ plus_id }}'
}
</script>
<script data-main="{% static 'places_core' %}/js/src/userspace-login.js" src="{% static 'places_core' %}/includes/require/require.js"></script>
{% endblock %}

{% block content %}
<div class="login-page">

    {% if welcome_msg %}
        <p class="alert alert-success">{% blocktrans %}Thank you for registeration. You can now log in.{% endblocktrans %}</p>
    {% endif %}

    <form id="google-plus" method="post" action="{% url 'social:complete' "google-plus" %}" style="display:none;">
        {% csrf_token %}
        <input id="at" type="hidden" name="access_token" value="" />
        <input id="code" type="hidden" name="code" value="" />
    </form>
    
    {% if errors %}
    <div class="alert alert-danger fade in" style="margin:0px auto;">{{ errors }}
        <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
    </div>
    {% endif %}
    
    <div id="login-form-validate" class="login-form">
        <h1 class="login-form-header">{% trans "Sign In" %}</h1>
        <div class="login-form-body">
            <div class="login-social row">

                <button type="button" class="facebook-button" onclick="location.href='//civilhub.org/login/facebook/'">Connect with Facebook</button>
                    
                <button type="button" class="twitter-button" onClick="location.href='{% url 'social:begin' 'twitter' %}'">{% trans "Connect with Twitter" %}</button>
                    
                <button type="button" class="linkedin-button" onClick="location.href='{% url 'social:begin' 'linkedin' %}'">{% trans "Connect with Linkedin" %}</button>
                        
                <button id="googleplus" type="button" class="google-button" >{% trans "Connect with Google+" %}</button>
                    
            </div>
            <form action="" method="post">
                <div class="input-section row">
                    {{ form.errors }}
                    <form class="form-horizontal" action="{% url 'user:login' %}" method="post">
                        {% csrf_token %}
                        <input class="form-control" id="username" maxlength="32" name="email" placeholder="Email" type="email" autofocus>
                        <input class="form-control" id="password" maxlength="64" name="password" placeholder="Password" type="password">
                        <div class="remember-me">
                            <input checked="checked" id="id_remember_me" name="remember_me" type="checkbox">{% trans "Remember me on this computer" %}
                        </div>
                        <div class="submit-section row">
                            <button type="submit" class="submit-button">{% trans "Login" %}</button>
                        </div>
                    </form>
                    <a href="{% url 'user:passreset' %}">{% trans "Forgot password" %}</a> | 
                    <a href="{% url 'user:register' %}">{% trans "Don't have account" %}</a>
                </div>
                            
            </form>
        </div>
    </div>
</div>

{% include 'places_core/google-login.html' %}

{% endblock %}
