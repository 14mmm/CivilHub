{% extends 'places_core/base.html' %}
{% load staticfiles %}{% load i18n %}
{% block header %} {% endblock %}
{% block content %}
<div class="login-page">
    
    {% block require_scripts %}&nbsp;{% endblock %}

    {% if welcome_msg %}
        <p class="alert alert-success">{% blocktrans %}Thank you for registeration. You can now log in.{% endblocktrans %}</p>
    {% endif %}
    
    {% comment %}
    
        Testujemy Google+
        
    {% endcomment %}
    
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            (function () {
                var po = document.createElement('script');
                po.type = 'text/javascript';
                po.async = true;
                po.src = 'https://plus.google.com/js/client:plusone.js?onload=start';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(po, s);
            })();
        </script>
        <script type="text/javascript">
            var signInCallback = function (result) {
                if (result['error']) {
                    console.log('An error happened:', result['error']);
                } else {
                    $('#code').attr('value', result['code']);
                    $('#at').attr('value', result['access_token']);
                    $('#google-plus').submit();
                }
            };
        </script>
        
       <div id="signinButton">
            <span class="g-signin" data-scope="{{ plus_scope }}"
                                   data-clientid="{{ plus_id }}"
                                   data-redirecturi="{% url 'user:passet' %}"
                                   data-accesstype="offline"
                                   data-cookiepolicy="single_host_origin"
                                   data-callback="signInCallback">
            </span>
        </div>
        
        <form id="google-plus" method="post" action="{% url 'social:complete' "google-plus" %}" style="display:none;">
            {% csrf_token %}
            <input id="at" type="hidden" name="access_token" value="" />
            <input id="code" type="hidden" name="code" value="" />
        </form>
    
    {% comment %}
    
        End test
        
    {% endcomment %}

    <div class="login-form">
        <h1 class="login-form-header">{% trans "Sign In" %}</h1>
        <div class="login-form-body">
            <div class="login-social row">

                <button type="button" class="facebook-button" onclick="location.href='/login/facebook/'">Connect with Facebook</button>
					
				<button type="button" class="twitter-button" onClick="location.href='{% url 'social:begin' 'twitter' %}'">{% trans "Connect with Twitter" %}</button>
					
				<button type="button" class="linkedin-button" onClick="location.href='{% url 'social:begin' 'linkedin' %}'">{% trans "Connect with Linkedin" %}</button>
						
				<button type="button" class="google-button" onClick="location.href='{% url 'social:begin' 'google' %}'">{% trans "Connect with Google+" %}</button>
                    
            </div>
            <form action="" method="post">
                <div class="input-section row">
                    {{ form.errors }}
                    <form class="form-horizontal" action="{% url 'user:login' %}" method="post">
                        {% csrf_token %}
                        <input class="form-control" id="username" maxlength="32" name="email" placeholder="Email" type="email">
                        <input class="form-control" id="password" maxlength="64" name="password" placeholder="Password" type="password">
                        <div class="remember-me">
                            <input checked="checked" id="id_remember_me" name="remember_me" type="checkbox">{% trans "Remember me on this computer" %}
                        </div>
                        <div class="submit-section row">
                            <button type="submit" class="submit-button">{% trans "Login" %}</button>
                        </div>
                    </form>
                    <a href="{% url 'user:passreset' %}">{% trans "Forgot password" %}</a> | 
                    <a href="{% url 'user:register' %}">{% trans "Don't have account" %}?</a>
                </div>
                            
            </form>
                    </div>
                </div>
            </div>

{% endblock %}
