{% load staticfiles %} {% load i18n %}

{% comment %}
    This is base template for entire application - every module extends it.
{% endcomment %}

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>{% block title %}{{ title | capfirst }}{% endblock %}</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="{% static 'places_core/favicon.png' %}" />
<link rel="stylesheet" href="{% static 'maps/css/maps.css' %}" />
<link href="{% static 'places_core/includes/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet">
<link href="{% static 'places_core/styles/bootstrap.min.css' %}" rel="stylesheet">
<link href="{% static 'places_core/includes/jquery-ui/themes/smoothness/jquery-ui.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'places_core/includes/google-fonts/google-fonts.css' %}" rel='stylesheet' type='text/css'>
<script src="{% static 'places_core/includes/jquery/jquery.js' %}"></script>
<script src="{% static 'places_core/includes/jquery-ui/ui/jquery-ui.js' %}"></script>
<script src="{% static 'places_core/includes/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'places_core/includes/bootbox/bootbox.js' %}"></script>
<script src="{% static 'places_core/includes/bootstrap/bootstrap-flashmsg.js' %}"></script>
<script src="{% static 'places_core/includes/underscore/underscore.js' %}"></script>
<script src="{% static 'places_core/includes/backbone/backbone.js' %}"></script>
<!-- http://momentjs.com/ -->
<script src="{% static 'places_core/includes/momentjs/moment.js' %}"></script>
<!-- git@bitbucket.org:krastley/javascript-helpers.git -->
<script src="{% static 'places_core/includes/helpers/helpers.js' %}"></script>
<script src="{% static 'places_core/js/djangojs.js' %}"></script>

<!-- CKEDITOR custom settings -->
<script src="{% static 'places_core/js/ckeditor-settings.js' %}"></script>

<!-- Django javascript translation catalog -->
<script type="text/javascript" src="{% url 'django.views.i18n.javascript_catalog' %}"></script>
<style>

</style>
</head>

<body>
    
{% comment %}Main page navigation - top navbar{% endcomment %}
<nav id="navbar-top"class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-navbar-collapse">
            <span class="sr-only">{% trans "Toggle navigation" %}</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a id="logo" class="navbar-brand" href="/"><img src="{% static 'places_core/img/logo.png' %}"> Civil Hub</a>
        </div>
        <div class="collapse navbar-collapse" id="bs-navbar-collapse">
            
            <ul class="nav navbar-nav navbar-right">
                {% if user.is_authenticated %}
                <li class="user-hidden-link">
                    <a href="{% url 'user:index' %}"><span class="fa fa-user"> </span> {% trans "Profile" %}</a>
                    <a href="{% url 'user:logout' %}"><span class="fa fa-power-off"> </span> {% trans "Logout" %}</a>
                </li>
                 
                <li class="user-profile-link">
                    <a class="avatar" href="{% url 'user:index' %}">
                        <img src="{{ user.profile.thumbnail.url }}" alt="{{ user }}" class="navbar-avatar" title="{% trans "Logged in as" %} {{ user.get_full_name }}" />
                    </a>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{ user.get_full_name }}</a>
                    <ul class="dropdown-menu">
                        <li><a href="#">{% trans "Profile" %}</a></li>
                        <li><a href="#">{% trans "My Places" %}</a></li>
                        <li><a href="{% url 'gallery:index' %}">{% trans "Media" %}</a></li>
                        <li><a href="{% url 'user:index' %}">{% trans "Edit profile" %}</a></li>
                        <li class="divider"></li>
                        <li><a href="{% url 'user:logout' %}">{% trans "Logout" %}</a></li>
                    </ul>
                </li>
                {% else %}
                <li><a href="{% url 'user:login' %}"><span class="fa fa-power-off"> </span> {% trans "Login" %}</a></li>
                {% endif %}
        </ul>
            {% if user.is_authenticated %}
            <ul class="nav navbar-nav navbar-right">
                <li><a href="{% url 'activities:actstream' %}">{% trans "Actions" %}</a></li>
                <li class="dropdown">
                    <a href="{% url 'locations:index' %}"><span class="ch-icon ch-home">{% trans "Places" %}</a></li>
                <li class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="ch-icon ch-earth"></span>Browse <span class="fa fa-angle-down"></span></a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href="">Tytuł</a>
                                    </li>
                                    <li>
                                        <a href="">Date</a>
                                    </li>
                                    <li>
                                        <a href="">Categoria</a>
                                    </li>
                                    <li>
                                        <a href="">Nazwa użytkownika</a>
                                    </li>
                                    <li>
                                        <a href="">Answers</a>
                                    </li>
                                </ul>
                            </li>

                <li><a href="{% url 'maps:index' %}">{% trans "Map" %}</a></li>

                <li class="dropdown">
                    <a class="bookmarks-list-toggle dropdown-toggle" data-toggle="dropdown" href="#"><span class="ch-icon ch-bookmark"></span>{% trans "My Bookmarks" %}<span class="fa fa-angle-down"></span></a>
                    <ul class="dropdown-menu bookmarks-list"></ul>
                </li>
                 
                 <li class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="ch-icon ch-envelope"></span></a>

                            </li>

            </ul>
            {% endif %}
                        
            <form class="navbar-form navbar-right" role="search" method="get" action="{% url 'search:haystack_search' %}">
                <div class="form-group">
                    <input type="text" name="q" id="id_q" class="form-control" placeholder="{% trans "Search" %}">
                </div>
                <button type="submit" class="search-button"><span class="fa fa-search"></span></button>
            </form>
        </div>
    </div>
</nav>
    
{% comment %}Główny widok mapy.{% endcomment %}
<script src="//maps.googleapis.com/maps/api/js?keyAIzaSyD9xJ_hO0PSwdf-8jaTKMAJRcy9USx7YjA&sensor=false"></script>
<div id="map-options-toggle">
    <a href="#" title="{% trans "Show options" %}">
        <span class="fa fa-arrow-circle-down"> </span>
    </a>
</div>
<nav id="map-options-panel" class="navbar navbar-default navbar-inverse" role="navigation">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#map-navbar-collapse">
        <span class="sr-only">{% trans "Toggle navigation" %}</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">{% trans "Start" %}</a>
    </div>
    <div class="collapse navbar-collapse" id="map-navbar-collapse">
        <form class="navbar-form navbar-nav">
            Places <input type="checkbox" data-target="location" class="map-filter-toggle" checked="checked" />
            Ideas <input type="checkbox" data-target="idea" class="map-filter-toggle" checked="checked" />
            Polls <input type="checkbox" data-target="poll" class="map-filter-toggle" checked="checked" />
            Discussions <input type="checkbox" data-target="discussion" class="map-filter-toggle" checked="checked" />
            News <input type="checkbox" data-target="news" class="map-filter-toggle" checked="checked" />
        </form>
        <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="{% trans "Search" %}">
            </div>
            <a class="btn btn-default">{% trans "Search" %}</a>
        </form>
    </div>
</nav>
<div id="map"></div>

<script src="{% static 'places_core/includes/google/markerclusterer.js' %}"></script>
<script>
// Globals
window.MEDIA_URL = '{% static 'maps' %}';
window.MAP_STYLES = [[{
    url: MEDIA_URL + '/images/people35.png',
    height: 35,
    width: 35,
    anchor: [16, 0],
    textColor: '#ff00ff',
    textSize: 10
}, {
    url: MEDIA_URL + '/images/people45.png',
    height: 45,
    width: 45,
    anchor: [24, 0],
    textColor: '#ff0000',
    textSize: 11
}, {
    url: MEDIA_URL + '/images/people55.png',
    height: 55,
    width: 55,
    anchor: [32, 0],
    textColor: '#ffffff',
    textSize: 12
}], [{
    url: MEDIA_URL + '/images/conv30.png',
    height: 27,
    width: 30,
    anchor: [3, 0],
    textColor: '#ff00ff',
    textSize: 10
}, {
    url: MEDIA_URL + '/images/conv40.png',
    height: 36,
    width: 40,
    anchor: [6, 0],
    textColor: '#ff0000',
    textSize: 11
}, {
    url: MEDIA_URL + '/images/conv50.png',
    width: 50,
    height: 45,
    anchor: [8, 0],
    textSize: 12
}], [{
    url: MEDIA_URL + '/images/heart30.png',
    height: 26,
    width: 30,
    anchor: [4, 0],
    textColor: '#ff00ff',
    textSize: 10
}, {
    url: MEDIA_URL + '/images/heart40.png',
    height: 35,
    width: 40,
    anchor: [8, 0],
    textColor: '#ff0000',
    textSize: 11
}, {
    url: MEDIA_URL + '/images/heart50.png',
    width: 50,
    height: 44,
    anchor: [12, 0],
    textSize: 12
}]];
</script>
<script src="{% static 'maps/js/main-map.js' %}"></script>
</body>