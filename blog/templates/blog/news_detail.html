{% extends 'locations/index.html' %}
{% load bookmarks_tags %}{% load i18n %}

{% block content %}
<div class="col-sm-9">
    <h1>{{ title }}</h1><hr />
    <article>
        {% bookmark_form for news %}
        {% if user.is_authenticated and user != news.creator %}
            <a class="report-abuse-link" href="{% url 'reports:report' app_label='blog' model_label='news' object_pk=news.pk %}">
                {% trans "Report abuse" %}</a>
        {% endif %}
        <div>{{ news.content | safe }}</div>
        {% if user.is_authenticated and user == news.creator %}
            <div class="news-controls">
                <a href="{% url 'blog:update' news.slug %}">{% trans "Edit" %}</a>
                <a href="">{% trans "Delete" %}</a>
                <p><a href="#" class="map-marker-toggle">{% trans "Add map marker" %}</a></p>
            </div>
        {% endif %}
        <div class="comments-{{ news.pk }}"></div>
        <div class="news-meta">
            <p>{% trans "Created by" %} {{ news.creator.get_full_name }} | {{ news.date_created }}</p>
        </div>
    </article>
    <input type="hidden" id="target-id" value="{{ news.pk }}" />
    <input type="hidden" id="target-label" value="blog" />
    <input type="hidden" id="target-type" value="{{ content_type }}" />
    <input type="hidden" id="target-user" value="{{ user.username }}" />
    <input type="hidden" id="target-user-fullname" value="{{ user.get_full_name }}" />
    <input type="hidden" id="target-avatar" value="{{ user.profile.avatar.url }}" />
    <p>
        Comments: <span class="badge comment-count">{{ news.get_comment_count }}</span>
        <a class="comment-toggle" data-target="{{ idea.pk }}" href="#">{% trans "Hide comments" %}</a>
    </p>
    {% include 'comments/commentlist.html' %}
</div>
{% if marker_form %}{% include 'maps/pointer-modal-form.html' %}{% endif %}
{% endblock %}