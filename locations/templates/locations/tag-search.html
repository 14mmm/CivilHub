{% extends 'locations/index.html' %}
{% load staticfiles %}{% load i18n %}

{% block extra_styles %}
<style>
/* Tag cloud */

.tags ul{
    margin:1em 0;
    padding:.5em 10px;
    text-align:left;
    /*background:#71b5e9 url({% static 'places_core/includes/tagclouds/bg_tags.gif' %}) repeat-x;*/
    }
.tags li{
    margin:0px 0px 5px 0px;
    padding:5px;
    list-style:none;
    display:inline-block;
    }
.tags li a{
    text-decoration:none;
    color:#fff;
    padding:0 2px;  
    }
.tags li a:hover{   
    color:#cff400;
    }       

.tag1{font-size:100%;}
.tag2{font-size:120%;}
.tag3{font-size:140%;}
.tag4{font-size:160%;}
.tag5{font-size:180%;}

/* alternative layout */

.tags .alt{
    text-align:left;
    padding:0;
    background:none;
    }
.tags .alt li{
    padding:2px 10px;
    background:#efefef;
    display:block;
    }
.tags .tag1, 
.tags .tag2, 
.tags .tag3, 
.tags .tag4, 
.tags .tag5{font-size:100%;}
.tags .tag1{background:#7cc0f4;}
.tags .tag2{background:#67abe0;}
.tags .tag3{background:#4d92c7;}
.tags .tag4{background:#3277ad;}
.tags .tag5{background:#266ca2;}
    
/* // Tag cloud */
</style>
{% endblock %}

{% block content %}
<div class="col-sm-9">
    <ul>
    {% for item in items %}
        <li><a href="{{ item.get_absolute_url }}">{{ item }}</a></li>
    {% endfor %}
    </ul>
</div>
{% endblock %}

{% block sidebar %}
<div class="col-sm-3">
    <ul class="sidebar-right">
        
    </ul>
    <div class="tags">
        <ul>
        {% for tag, counter in tags %}
            <li class="tag-entry" data-counter="{{ counter }}"><a href="{% url 'locations:tag_search' slug=location.slug tag=tag %}">{{ tag }}</a></li>
        {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}

{% block footer_scripts %}
<script>
(function ($) {
    "use strict";
    var max_counter = 0,
        i = 0,
        min_counter, avg;

    $('.tags > ul > li').each(function () {
        // Zbieramy wartości counterów dla każdego taga.
        var count = parseInt($(this).attr('data-counter'), 10);
        if (count > max_counter) {
            max_counter = count;
        }
        if (min_counter == undefined || count < min_counter) {
            min_counter = count;
        }
        i++
    });

    $('.tags > ul > li').each(function () {
        // Kolejna pętla - przyporządkujemy klasy na podstawie
        // zebranych wcześniej wartości.
        var count = parseInt($(this).attr('data-counter'), 10);
        
        if (count <= max_counter / 5) {
            $(this).addClass('tag1');
        } else if (count <= max_counter / 4) {
            $(this).addClass('tag2');
        } else if (count <= max_counter / 3) {
            $(this).addClass('tag3');
        } else if (count <= max_counter / 2) {
            $(this).addClass('tag4');
        } else {
            $(this).addClass('tag5');
        }
    });

})(jQuery);
</script>
{% endblock %}