{% extends 'places_core/base.html' %}
{% load staticfiles %}

{% block extra_styles %}
<link rel="stylesheet" href="{% static 'locations/css/location-list.css' %}" />
{% endblock %}

{% block content %}
    {% for location in locations %}
    <div class="location-entry">
        <h2><a href="{% url 'locations:details' location.id %}">{{ location.name }}</a></h2>
        <p>{{ location.description }}</p>
        <p>{{ location.latitude }}</p>
        <p>{{ location.longitude }}</p>
        {% if user.is_authenticated and user == location.creator %}
            <p><a href="{% url 'locations:update' location.id %}">Edit</a></p>
            <p><a href="{% url 'locations:delete' location.id %}">Delete</a></p>
        {% endif %}
        {% if user.is_authenticated and not user in location.users.all %}
            <p><button data-location-id="{{ location.id }}" class="btn btn-success btn-follow-location">Follow</button></p>
        {% endif %}
        {% if user.is_authenticated and user in location.users.all %}
            <p><button data-location-id="{{ location.id }}" class="btn btn-danger btn-unfollow-location">Stop following</button></p>
        {% endif %}
        <p><img src="{{ location.image.url }}" alt="{{ location.name }}" class="location-preview-img" /></p>
    </div>
    {% endfor %}
    {% if user.is_authenticated %}
        <div><a href="{% url 'locations:create' %}"><button class="btn btn-primary">Create new</button></a></div>
    {% endif %}
{% endblock %}

{% block footer_scripts %}
<script src="{% static 'locations/js/location-follow.js' %}"></script>
{% endblock %}
