{% load staticfiles %} {% load i18n %}

{% comment %}
    This is base template for entire application - every module extends it.
{% endcomment %}

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>{% block title %}{{ title | capfirst }}{% endblock %}</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="{% static 'places_core/favicon.png' %}" />
<link href="{% static 'places_core/includes/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet">
<!--<link href="{% static 'places_core/includes/bootswatch/spacelab.min.css' %}" rel="stylesheet">-->
<link href="{% static 'places_core/styles/bootstrap.min.css' %}" rel="stylesheet">
<!-- Dodatkowe style które ostatnio pisałem dla nowych elementów. -->
<link href="{% static 'places_core/css/basic.css' %}" rel="stylesheet">
<link href="{% static 'places_core/includes/jquery-ui/themes/smoothness/jquery-ui.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'places_core/includes/google-fonts/google-fonts.css' %}" rel='stylesheet' type='text/css'>


{% comment %}Miejsce na dodatkowe pliki css.{% endcomment %}
{% block extra_styles %}{% endblock %}

<script src="{% static 'places_core/includes/jquery/jquery.js' %}"></script>
<script src="{% static 'places_core/includes/jquery-ui/ui/jquery-ui.js' %}"></script>
<script src="{% static 'places_core/includes/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'places_core/includes/bootbox/bootbox.js' %}"></script>
<script src="{% static 'places_core/includes/bootstrap/bootstrap-flashmsg.js' %}"></script>
<script src="{% static 'places_core/includes/underscore/underscore.js' %}"></script>
<script src="{% static 'places_core/includes/backbone/backbone.js' %}"></script>
<!-- http://momentjs.com/ -->
<script src="{% static 'places_core/includes/momentjs/moment.js' %}"></script>
<!-- git@bitbucket.org:krastley/javascript-helpers.git -->
<script src="{% static 'places_core/includes/helpers/helpers.js' %}"></script>
<script src="{% static 'places_core/js/djangojs.js' %}"></script>

<!-- CKEDITOR custom settings -->
<script src="{% static 'places_core/js/ckeditor-settings.js' %}"></script>

<!-- Django javascript translation catalog -->
<script type="text/javascript" src="{% url 'django.views.i18n.javascript_catalog' %}"></script>

{% comment %}Dodatkowe skrypty do załączenia globalnie.{% endcomment %}
{% block extra_scripts %}{% endblock %}
</head>
<body>

{% comment %}Place for success/warning messages from django.contrib.messages.{% endcomment %}
{% if messages %}
<div class="message-area">
{% for message in messages %}
    <script>
    (function ($) {
        "use strict";
        display_alert('{{ message }}', '{{ message.tags }}');
    })(jQuery);
    </script>
{% endfor %}
</div>
{% endif %}

{% comment %}Main page navigation - top navbar{% endcomment %}
<nav id="navbar-top"class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-navbar-collapse">
            <span class="sr-only">{% trans "Toggle navigation" %}</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a id="logo" class="navbar-brand" href="/"><img src="{% static 'places_core/img/logo.png' %}"> Civil Hub</a>
        </div>
        <div class="collapse navbar-collapse" id="bs-navbar-collapse">
            
            <ul class="nav navbar-nav navbar-right">
                {% if user.is_authenticated %}
                <li class="user-hidden-link">
                    <a href="{% url 'user:index' %}"><span class="fa fa-user"> </span> {% trans "Profile" %}</a>
                    <a href="{% url 'user:logout' %}"><span class="fa fa-power-off"> </span> {% trans "Logout" %}</a>
                </li>
                 
                <li class="user-profile-link">
                    <a class="avatar" href="{% url 'user:index' %}">
                        <img src="{{ user.profile.thumbnail.url }}" alt="{{ user }}" class="navbar-avatar" title="{% trans "Logged in as" %} {{ user.get_full_name }}" />
                    </a>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{ user.get_full_name }}</a>
                    <ul class="dropdown-menu">
                        <li><a href="#"><i class="fa fa-user fa-fw"></i>{% trans "Profile" %}</a></li>
                        <li><a href="#"><i class="fa fa-home fa-fw"></i>{% trans "My Places" %}</a></li>
                        <li><a href="{% url 'gallery:index' %}"><i class="fa fa-file-image-o fa-fw"></i>{% trans "Media" %}</a></li>
                        <li><a href="{% url 'user:index' %}"><i class="fa fa-pencil-square-o fa-fw"></i>{% trans "Edit profile" %}</a></li>
                        <li class="divider"></li>
                        <li><a href="{% url 'user:logout' %}"><i class="fa fa-sign-out fa-fw"></i>{% trans "Logout" %}</a></li>
                    </ul>
                </li>
                {% else %}
                <li><a href="{% url 'user:login' %}"><span class="fa fa-power-off"> </span> {% trans "Login" %}</a></li>
                {% endif %}
        </ul>
            {% if user.is_authenticated %}
            <ul class="nav navbar-nav navbar-right">
                <li><a href="{% url 'activities:actstream' %}">{% trans "Actions" %}</a></li>
                <li class="dropdown">
                    <!-- <a href="{% url 'locations:index' %}"><span class="ch-icon ch-home">{% trans "Places" %}</a></li>
                <li class="dropdown"> -->
                                <a class="dropdown-toggle" data-toggle="dropdown" href="{% url 'locations:index' %}"><span class="ch-icon ch-home"></span>{% trans "Places" %}<span class="fa fa-angle-down"></span></a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href="{% url 'locations:index' %}"><i class="fa fa-globe fa-fw"></i>{% trans "Browse Places" %}</a>
                                    </li>
                                    <li class="divider"></li>
                                    <li>
                                        <a href="">Date</a>
                                    </li>
                                    <li>
                                        <a href="">Categoria</a>
                                    </li>
                                    <li>
                                        <a href="">Nazwa użytkownika</a>
                                    </li>
                                    <li>
                                        <a href="">Answers</a>
                                    </li>
                                </ul>
                            </li>

                <li><a href="{% url 'maps:index' %}"><span class="ch-icon ch-earth"></span>{% trans "Map" %}</a></li>

                <li class="dropdown">
                    <a class="bookmarks-list-toggle dropdown-toggle" data-toggle="dropdown" href="#"><span class="ch-icon ch-bookmark"></span>{% trans "My Bookmarks" %}<span class="fa fa-angle-down"></span></a>
                    <ul class="dropdown-menu bookmarks-list"></ul>
                </li>
                 
                 <li class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="ch-icon ch-envelope"></span></a>

                            </li>

            </ul>
            {% endif %}
                        
            <form class="navbar-form navbar-right" role="search" method="get" action="{% url 'search:haystack_search' %}">
                <div class="form-group">
                    <input type="text" name="q" id="id_q" class="form-control" placeholder="{% trans "Search" %}">
                </div>
                <button type="submit" class="search-button"><span class="fa fa-search"></span></button>
            </form>
        </div>
    </div>
</nav>

{% comment %}Page content begins here.{% endcomment %}
<div class="main-page-content">
    
    {% comment %}
        W bloku header zostawiłem miejsce dla nagłówka lokalizacji - banner
        ze zdjęciem, ścieżka lokalizacji oraz drugie menu poniżej banneru mają
        swoje miejsce tutaj.
    {% endcomment %}
    {% block header %}
    <div class="container">
        <h1 class="custom-main-title">{{ title | capfirst }} <small>{{ subtitle | capfirst }}</small>
            <!--<span class="fa fa-cogs custom-logolike"> </span>-->
        </h1>
        <hr />
    </div>
    {% endblock %}
    
    <div class="container">
        
        <script src="//maps.googleapis.com/maps/api/js?keyAIzaSyD9xJ_hO0PSwdf-8jaTKMAJRcy9USx7YjA&sensor=false"></script>
        
        {% comment %}
            W tym bloku znajduje się menu z filtrami wyszukiwania oraz formularzem
            wyszukiwarki. Nadpisywany w szablonie każdego modułu.
        {% endcomment %}
        {% block topbar %}{% endblock %}
        
        {% comment %}Główna zawartość strony.{% endcomment %}
        {% block content %}<p class="custom-booklike">Lorem ipsum dolor sit amet.</p>{% endblock %}
        
        {% comment %}Sidebar dla podstron lokalizacji - czyli menu po prawej.{% endcomment %}
        {% block sidebar %}{% endblock %}
        
        <div class="clear"></div>
        <hr />
        {% if user.is_authenticated %}
            {% include 'civmail/invite-users.html' %}
            {% comment %}
                Link, który pozwala wysyłać masowe wiadomości z zaproszeniem do przeglądania bieżącej strony.
            {% endcomment %}
            <p><a href="#" id="invite-people-toggle" title="{% trans "Invite people to browse this content" %}">{% trans "Invite people" %}</a></p>
        {% endif %}
        <p class="custom-copyrights">Copyright&copy;2014</p>
        
    </div>
</div>

{% comment %}
    Modal dla formularza 'abuse report'. Dostępny na każdej stronie.
{% comment %}

{% if user.is_authenticated %}
<script type="text/template" id="abuse-form-tpl">
<div class="modal fade" id="abuse-form-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">{% trans "Report abuse" %}</h4>
            </div>
            <div class="modal-body">
                <form role="presentation" method="post" action="" >
                    <div class="form-group">
                        <label for="category-description">{% trans "Reason" %}</label>
                        <textarea id="category-description" cols="10" rows="10" class="form-control"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">{% trans "Close" %}</button>
                <button type="button" class="btn btn-primary submit-btn">{% trans "Send" %}</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
</script>
{% endif %}

{% comment %}Dodatkowe skrypty dołączane przed zamknięciem 'body'.{% endcomment %}
{% block footer_scripts %}{% endblock %}

{% if user.is_authenticated %}
{% comment %}
    Common scripts, but ONLY for authenticated users.
{% endcomment %}
<script src="{% static 'civmail/js/invite-people.js' %}"></script>
{% endif %}

<script type="text/template" id="user-popup-tpl">
<div class="user-popup-avatar">
    <img src="<%= avatar %>" alt="<%= username %>" />
</div>
<div class="user-popup-details">
    <span class="fa fa-times-circle-o user-popup-close"> </span>
    <p class="user-popup-personals">
        <a href="<%= user_link %>"><%= fullname %></a><br />
        <%= rank_pts %> {% trans 'pts' %}
    </p>
    <p>
        <% for (var i = 0; i < follows.length; i++) { %>
            <%= follows[i] %>,&nbsp;
        <% } %>
    </p>
</div>
</script>

<script src="{% static 'places_core/js/common-scripts.js' %}"></script>

</body>
</html>